<!DOCTYPE html>
<html>
    <head>
          <title>ws: A light weight webserver for static content development.</title>
          <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
          <link rel="stylesheet" href="doc/css/style.css">
    </head>
    <body>
        <header>
        <h1>ws - a nimple webserver with friends</h1>

        </header>
        <section>
        <h1>ws</h1>

<pre><code>A nimble webserver with friends
</code></pre>

<p><em>ws</em> started as a nimble static content webserver. It grew some friends along the way.  Now it is a small collection for command line utilities.</p>

<h1><em>ws</em> has friends</h1>

<p><em>ws</em> is simple static content webserver with optional support for SSL. It is careful to avoid dot files and by default with server the content of the directory where it is launch. <em>ws</em> has a companion webserver named <em>wsjs</em>. It is adds the ability to dynamic create content via JavaScript files.  Each JavaScript file becomes a route itself. <em>wsjs</em> is handy when you&rsquo;re mocking up services or RESTful API.</p>

<p><em>ws</em> and <em>wsjs</em> have friends. These are additional command line utilities useful for quickly prototyping websites. They include <em>wsinit</em> which creates a project directory skeletons and configuration interactively, <em>wskeygen</em> which generates self signed SSL certificates. Additional commands that are helpful in preprocessing text or augmenting shell scripts.</p>

<p>The complete list of utilities</p>

<ul>
<li><a href="doc/ws.md">ws</a> a nimple webserver for static content

<ul>
<li>Built on Golangs native http/https modules</li>
<li>Restricted file service, only from the docroot and no &ldquo;dot files&rdquo; are served</li>
<li>No dynamic content support</li>
<li>Quick startup, everything logged to console for easy debugging or piping to a log processor</li>
</ul></li>
<li><a href="doc/wsjs.md">wsjs</a> a nimple webserver for static and JavaScript generated dynamic content

<ul>
<li>built on Robert Krimen&rsquo;s excellent <a href="https://github.com/robertkrimen/otto">otto</a> JavaScript VM</li>
<li>Mockup your dynamic content via JavaScript defined routes (great for creating JSON blobs used by a browser side demo)</li>
</ul></li>
<li><a href="document">wsinit</a> will generate a project structure as well as a shell script for configuring <em>ws</em> and <em>wsjs</em> in a 12 factor app manor.</li>
<li><a href="doc/wsmarkdown.md">wsmarkdown</a> renders markdown as HTML

<ul>
<li>this markdown is built on the <a href="https://github.com/russross/blackfriday">Blackfriday</a> Markdown library</li>
</ul></li>
<li><a href="doc/shorthand.md">shorthand</a> a domain specific language that expands shorthand labels into associated replacement values</li>
<li><a href="doc/slugify.md">slugify</a> turns text phrases into readibly URL friendly phrases (e.g. &ldquo;Hello World&rdquo; becomes &ldquo;Hello_World&rdquo;)</li>
<li><a href="doc/unslugify.md">unslugify</a> returns slugs into simple phrase (e.g. &ldquo;Hello_World&rdquo; becomes &ldquo;Hello World&rdquo;)</li>
</ul>

<p>Got an idea for a new project? Want to prototype it quickly?</p>

<ol>
<li>run &ldquo;wsinit&rdquo; to set things up</li>
<li>run &ldquo;. etc/config.sh&rdquo; seed your environment</li>
<li>run &ldquo;ws&rdquo; and start working!</li>
<li>run &ldquo;wsjs&rdquo; to mockup a RESTful service</li>
</ol>

<p><em>ws</em> feature set has been kept minimal. Only what you need when you turn it on.</p>

<ul>
<li>Restricted file service, only from the docroot and no &ldquo;dot files&rdquo; are served</li>
<li>No dynamic content support unless you turn on OttoEngine for JavaScript defined routes (great for creating JSON blobs used by a client side demo)</li>
<li>Quick startup, everything logged to console for easy debugging or piping to a log processor</li>
</ul>

<h2>USAGE</h2>

<pre><code>    ws [options]
</code></pre>

<h2>OPTIONS</h2>

<pre><code>-D  (defaults to ) This is your document root for static files.
-H  (defaults to localhost) Set this hostname for webserver.
-O  (defaults to ) Turns on otto engine using the path for route JavaScript route handlers
-P  (defaults to 8000) Set the port number to listen on.
-cert   (defaults to ) path to your SSL cert pem file.
-docroot    (defaults to ) This is your document root for static files.
-h  (defaults to false) This help document.
-help   (defaults to false) This help document.
-host   (defaults to localhost) Set this hostname for webserver.
-key    (defaults to ) Path to your SSL key pem file.
-o  (defaults to false) When true this option turns on ottoengine. Uses the path defined by WS_OTTO_PATH environment variable or one provided by -O option.
-otto   (defaults to false) When true this option turns on ottoengine. Uses the path defined by WS_OTTO_PATH environment variable or one provided by -O option.
-otto-path  (defaults to ) Turns on otto engine using the path for route JavaScript route handlers
-port   (defaults to 8000) Set the port number to listen on.
-tls    (defaults to false) When true this turns on TLS (https) support.
-v  (defaults to false) Display the version number of ws command.
-version    (defaults to false) Display the version number of ws command.
</code></pre>

<h1>Tour</h1>

<h2>http support</h2>

<p>Make sure <em>ws</em> is your path. To run for basic <em>http</em> service change to
the directory you wish to serve and type <em>ws</em> at the command prompt. Example -</p>

<pre><code class="language-shell">    cd public_html
    ws
</code></pre>

<p>When <em>ws</em> starts up you&rsquo;ll some configuration information and the URL that it is listening for. Notice the default port is 8000 so you need to include that part in your URL too. If your machine was named <em>example.local</em> then you the URL might look like &ldquo;<a href="http://localhost:8000&quot;">http://localhost:8000&quot;</a>. Point your web browser at the URL you see for your system.  When the web browser connections you should see a stream of log information. The stream of text will continue as long as you continue to have requests to the server until you shutdown <em>ws</em>. To shutdown <em>ws</em> you can press the &ldquo;ctrl&rdquo; key and letter &ldquo;c&rdquo;. This will kill the process and shutdown your web server.</p>

<p>You don&rsquo;t have to run <em>ws</em> with the defaults.  You can specity a different document root with the <em>-docroot</em> option. Here is an example of telling <em>ws</em> to use the <em>/www</em> directory for the document root.</p>

<pre><code class="language-shell">    ws -docroot=/www
</code></pre>

<p>You can also pass these setting via your operating system&rsquo;s environment. Here is an example of configuration the above setting in a Bash script.</p>

<pre><code class="language-shell">    WS_DOCROOT=/www
    ws
</code></pre>

<p>More typically you&rsquo;ll create a configuration file, source it (E.g. in your .profile or .bashrc setup files) and <em>ws</em> will pickup the settings that way.</p>

<pre><code class="language-bash">    #!/bin/bash
    export WS_DOCROOT=/www
</code></pre>

<p>If that was sourced in our login scripts then typing <em>ws</em> on the command line would server the contents of <em>/www</em> by default. You can override the defaults with the command line option <em>-docroot</em>.</p>

<p>In this way you can configure hostname, port.  In the following example
the port will be set to 8081 and the hostname will be &ldquo;localhost&rdquo;.</p>

<h3>Command line version</h3>

<pre><code class="language-shell">    ws -docroot=/www -host=localhost -port=8081
</code></pre>

<h3>The envirnonment version</h3>

<pre><code class="language-bash">    #!/bin/bash
    export WS_DOCROOT=/www
    export WS_HOST=localhost
    export WS_PORT=8081
</code></pre>

<p>Source the script above then run <em>ws</em>.</p>

<pre><code class="language-shell">    ws
</code></pre>

<p>If you have the environment variables set and use a command line option
the command line option will override the event variable setting. In the
example <em>ws</em> will listen on port 8007.</p>

<pre><code class="language-bash">    #!/bin/bash
    WS_DOCROOT=/www
    WS_HOST=localhost
    WS_PORT=8080
</code></pre>

<p>Now run <em>ws</em></p>

<pre><code>    ws -port=8007
</code></pre>

<p>For a full list of command line options run <em>ws</em> with the <em>-help</em> option.</p>

<p>The environment variables for <em>http</em> service are</p>

<ul>
<li>WS_DOCROOT</li>
<li>WS_HOST</li>
<li>WS_PORT</li>
</ul>

<h2>https support</h2>

<p>If you want to run with <em>https</em> support it works on the same principles as <em>http</em> support. It requires three additional pieces of information.</p>

<ol>
<li>It needs to knows where to find your <em>cert.pem</em></li>
<li>It needs to know where to find your  <em>key.pem</em></li>
<li>It needs to know to use SSL/TLS support.</li>
</ol>

<p>By default <em>ws</em> will look for <em>cert.pem</em> and <em>key.pem</em> in your <em>$HOME/etc/ws</em> directory. You can specify alternate locations with the <em>-cert</em> and <em>-key</em> command line options or the <em>WS_CERT</em> and <em>WS_KEY</em> environment variables.  To turn <em>https</em> support on you need the option <em>-tls=true</em> or the environment variable <em>WS_TLS</em> set to &ldquo;true&rdquo;.</p>

<h3>Command line example</h3>

<pre><code class="language-bash">    ws -tls=true -cert=my-cert.pem -key=my-key.pem
</code></pre>

<h3>The environment version</h3>

<pre><code class="language-bash">    #!/bin/bash
    export WS_CERT=/etc/ws/cert.pem
    export WS_KEY=/etc/ws/key.pem
    export WS_TLS=true
</code></pre>

<p>If this was sourced in your login scripts then by default <em>ws</em> will run as a
<em>https</em> server with the document root set to your current working directory for your current hostname on port 8443.</p>

<h3>Generating TLS certificates and keys</h3>

<p><em>ws</em> comes with a <em>wskeygen</em> option for generating self-signed certificates and keys.</p>

<pre><code class="language-SHELL">    wskeygen
</code></pre>

<p>This was create a <em>cert.pem</em> and <em>key.pem</em> files in <em>$HOME/etc/ws</em> directory.</p>

<h2>Otto</h2>

<p><a href="https://github.com/robertkrimen/otto">otto</a> is a JavaScript virtual machine written by Robert Krimen.  The <em>ottoengine</em> allows easy route oriented API prototyping.  Each JavaScript file rendered in the Otto virtual machine becomes a route.  E.g. <em>example-1.js</em> becomes the route <em>/example-1</em>. <em>example-1</em> should contain a closure which can recieve a &ldquo;Request&rdquo; and &ldquo;Response&rdquo; object as parameters. The &ldquo;Response&rdquo; object is used to tell the web server what to send back to the browser requesting the route.</p>

<pre><code class="language-JavaScript">    /* example-1.js - a simple example of Request and Response objects */
    (function (req, res) {
        var header = req.Header;

        res.setHeader(&quot;content-type&quot;, &quot;text/html&quot;);
        res.setContent(&quot;&lt;p&gt;Here is the Header array received by this request&lt;/p&gt;&quot; +
            &quot;&lt;pre&gt;&quot; + JSON.stringify(header) + &quot;&lt;/pre&gt;&quot;);
    }(Request, Response));
</code></pre>

<p>Assuming <em>ottoengine</em> is turned on then the page rendered should have a content type of &ldquo;text/html&rdquo; with the body shoulding the paragraph about exposing the request headers as a JSON blob.  Two command line options or environment variables turn <em>ottoengine</em> on.</p>

<p>Want to expand out the site quickly, write the HTML skeleton with
markdown, sprinkle in some shorthand which can leverage some shell logic
and now you have HTML pages with common nav, headers, and footers.</p>

<h2>LICENSE</h2>

<p>copyright &copy; 2014 - 2015 All rights reserved.
Released under the <a href="http://opensource.org/licenses/bsd-license.php">Simplified BSD License</a></p>

        </section>
        <nav>
        <ul>
<li><a href="/">Home</a></li>
<li><a href="doc/index.html">Documentation</a></li>
<li><a href="doc/?main=TUTORIAL.md">Tutorial</a></li>
</ul>

        </nav>
        <footer>
        <h2>LICENSE</h2>

<p>copyright &copy; 2014 - 2015 All rights reserved.
Released under the <a href="http://opensource.org/licenses/bsd-license.php">Simplified BSD License</a></p>

        </footer>
    </body>
</html>
